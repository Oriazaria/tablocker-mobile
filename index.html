// החלף את הפונקציה showSimpleLockedTabs באפליקציית המובייל עם זו:

// הצגה פשוטה של טאבים נעולים
showSimpleLockedTabs(lockedTabs) {
    console.log('📋 Showing locked tabs:', lockedTabs);
    
    if (!lockedTabs || lockedTabs.length === 0) {
        // הצג הודעה באזור התגובות במקום alert
        this.showResponse('📭 אין טאבים נעולים כרגע');
        
        // הצע לנעול טאב חדש
        const lockNow = confirm('אין טאבים נעולים כרגע.\nהאם תרצה לנעול דומיין חדש?');
        if (lockNow) {
            this.showManualLockDialog();
        }
        return;
    }

    // בנה הודעה מפורטת
    let message = `🔒 נמצאו ${lockedTabs.length} טאבים נעולים:\n\n`;
    
    lockedTabs.forEach((tab, index) => {
        const displayName = tab.displayName || tab.key || 'Unknown';
        const type = tab.type === 'domain' ? '🌐 דומיין' : '📄 עמוד';
        const hasRecovery = tab.hasRecovery ? '✅' : '❌';
        const autoLock = tab.autoLock ? '⏰' : '🔒';
        
        // קצר את השם אם ארוך מדי
        const shortName = displayName.length > 40 ? 
            displayName.substring(0, 37) + '...' : displayName;
        
        message += `${index + 1}. ${type} ${shortName}\n`;
        message += `   ${autoLock} נעילה אוטומטית: ${tab.autoLock ? 'כן' : 'לא'}\n`;
        message += `   ${hasRecovery} שאלת שחזור: ${tab.hasRecovery ? 'כן' : 'לא'}\n\n`;
    });

    // הצג באזור התגובות
    this.showResponse('📋 רשימת טאבים נעולים:');
    
    // פצל את ההודעה לשורות והצג כל אחת
    message.split('\n').forEach(line => {
        if (line.trim()) {
            this.showResponse(line);
        }
    });
    
    // הצע אפשרויות פעולה
    setTimeout(() => {
        const action = prompt(
            'בחר פעולה:\n\n' +
            '1 - בטל את כל הנעילות\n' +
            '2 - נעל דומיין חדש\n' +
            '3 - ביטול',
            '3'
        );
        
        switch(action) {
            case '1':
                if (confirm('האם אתה בטוח שברצונך לבטל את כל הנעילות?')) {
                    this.sendCommand({ action: 'UNLOCK_ALL_TABS' });
                }
                break;
            case '2':
                this.showManualLockDialog();
                break;
            default:
                // ביטול - לא עושים כלום
                break;
        }
    }, 500);
}

// בנוסף, נוסיף פונקציה לביטול נעילה ספציפית:
showUnlockSpecificDialog() {
    // קבל רשימת טאבים נעולים
    this.sendCommand({ action: 'GET_LOCKED_TABS' });
    
    setTimeout(() => {
        const url = prompt(
            'הזן את ה-URL או הדומיין שברצונך לבטל את נעילתו:\n' +
            '(השאר ריק כדי לבטל)'
        );
        
        if (url && url.trim()) {
            this.sendCommand({
                action: 'UNLOCK_SPECIFIC',
                key: url.trim()
            });
        }
    }, 3000); // המתן לקבלת הרשימה
}